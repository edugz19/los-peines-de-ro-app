<ion-content>
  <h6 class="titulo">ELIGE UNO O MÁS SERVICIOS</h6>

  <ion-grid class="filtros">
    <ion-row>
      <ion-col size="12">
        <ion-icon class="icon" name="search-outline"></ion-icon>
        <input
          type="text"
          class="form-control"
          id="busqueda"
          placeholder="Busca un tratamiento..."
          name="filtrado"
          (keyup)="buscarServicio($event)"
        />
        <ion-icon class="end" name="close-circle-outline" (click)="resetInput()"></ion-icon>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <select 
          class="form-select"
          id="select"
          aria-label="Selecciona categoría"
          (change)="buscarPorCategoria($event)"
        >
          <option selected value="00">Selecciona categoría</option>
          <option *ngFor="let categoria of categorias" value="{{categoria.id}}">
            {{ categoria.nombre | titlecase }}
          </option>
        </select>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div *ngIf="categoriasTemp.length === 0 && sinResultados === false">
    <div *ngFor="let categoria of categorias" class="categoria">
      <p class="text-secondary titulo-categoria">
        {{ categoria.nombre | uppercase }}
      </p>

      <div *ngIf="serviciosTemp.length === 0">
        <div *ngFor="let servicio of servicios" class="mt-3">
          <ion-item
            class="ion-no-padding"
            *ngIf="categoria.id === servicio.categoria"
          >
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col size="9">
                  <strong style="margin: 0"
                    >{{ servicio.nombre | titlecase}}</strong
                  >
                  <span class="duracion text-secondary"
                    >{{ getHoras(servicio.duracion) }}</span
                  >
                </ion-col>
                <ion-col size="2" class="text-end">
                  <strong>{{ truncarPrecio(servicio.precio) }}€</strong>
                </ion-col>
                <ion-col size="1" class="text-end ml-4">
                  <ion-icon class="tic" name="ellipse-outline"></ion-icon>
                </ion-col>
              </ion-row>
              <ion-row class="mb-2 mt-2">
                <ion-col size="12" *ngIf="servicio.descripcion !== ''">
                  <span class="info" (click)="openModal(servicio)">MAS INFORMACIÓN</span>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        </div>
      </div>

      <div *ngIf="serviciosTemp.length !== 0">
        <div *ngFor="let servicio of serviciosTemp" class="mt-3">
          <ion-item
            class="ion-no-padding"
            *ngIf="categoria.id === servicio.categoria"
          >
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col size="9">
                  <strong style="margin: 0"
                    >{{ servicio.nombre | titlecase}}</strong
                  >
                  <span class="duracion text-secondary"
                    >{{ getHoras(servicio.duracion) }}</span
                  >
                </ion-col>
                <ion-col size="2" class="text-end">
                  <strong>{{ truncarPrecio(servicio.precio) }}€</strong>
                </ion-col>
                <ion-col size="1" class="text-end">
                  <ion-icon name="cart-outline"></ion-icon>
                </ion-col>
              </ion-row>
              <ion-row class="mb-2 mt-2">
                <ion-col size="12" *ngIf="servicio.descripcion !== ''">
                  <span class="info" (click)="openModal(servicio)">MAS INFORMACIÓN</span>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="categoriasTemp.length !== 0">
    <div *ngFor="let categoria of categoriasTemp" class="categoria">
      <p class="text-secondary titulo-categoria">
        {{ categoria.nombre | uppercase }}
      </p>

      <div *ngIf="serviciosTemp.length === 0">
        <div *ngFor="let servicio of servicios" class="mt-3">
          <ion-item
            class="ion-no-padding"
            *ngIf="categoria.id === servicio.categoria"
          >
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col size="9">
                  <strong style="margin: 0"
                    >{{ servicio.nombre | titlecase}}</strong
                  >
                  <span class="duracion text-secondary"
                    >{{ getHoras(servicio.duracion) }}</span
                  >
                </ion-col>
                <ion-col size="2" class="text-end">
                  <strong>{{ truncarPrecio(servicio.precio) }}€</strong>
                </ion-col>
                <ion-col size="1" class="text-end">
                  <ion-icon name="cart-outline"></ion-icon>
                </ion-col>
              </ion-row>
              <ion-row class="mb-2 mt-2">
                <ion-col size="12" *ngIf="servicio.descripcion !== ''">
                  <span class="info" (click)="openModal(servicio)">MAS INFORMACIÓN</span>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        </div>
      </div>

      <div *ngIf="serviciosTemp.length !== 0">
        <div *ngFor="let servicio of serviciosTemp" class="mt-3">
          <ion-item
            class="ion-no-padding"
            *ngIf="categoria.id === servicio.categoria"
          >
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col size="9">
                  <strong style="margin: 0"
                    >{{ servicio.nombre | titlecase}}</strong
                  >
                  <span class="duracion text-secondary"
                    >{{ getHoras(servicio.duracion) }}</span
                  >
                </ion-col>
                <ion-col size="2" class="text-end">
                  <strong>{{ truncarPrecio(servicio.precio) }}€</strong>
                </ion-col>
                <ion-col size="1" class="text-end">
                  <ion-icon name="cart-outline"></ion-icon>
                </ion-col>
              </ion-row>
              <ion-row class="mb-2 mt-2">
                <ion-col size="12" *ngIf="servicio.descripcion !== ''">
                  <span class="info" (click)="openModal(servicio)">MAS INFORMACIÓN</span>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="categoriasTemp.length === 0 && sinResultados === true" class="p-3">
    <p class="text-center">No hay resultados con su búsqueda.</p>
    <p class="text-center text-secondary">Intente con algunas de las siguientes palabras: corte, mechas, peinado, etc</p>
    <p class="text-center text-secondary"></p>
  </div>
  
</ion-content>
